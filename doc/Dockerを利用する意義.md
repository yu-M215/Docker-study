## 1.2 Docker を利用する意義
- 普遍な実行環境による冪等性の確保
- 実行環境構築とアプリケーション構成のコード化
- 実行環境とアプリケーションの一体化によるポータビリティ性の向上
- システムを構成するアプリケーションやミドルウェアの構成管理の容易さ

### 1.2.1 環境際問題からの脱却
デプロイ先のサーバーに差異がある！
アプリケーションをデプロイしても、サーバーによって挙動が変わってしまう！

このような問題の根本的な発生原因は可変的なインフラ（Mutable Infrastructure）を許容していることにある。

#### Infrastructure as Code と Immutable Infrastructure
##### Infrastructure as Code：インフラの構成管理
コードベースでインフラ構築を定義する考え方。
手作業が介する余地を減らし、コード中心にすることで複数の同じ構成のサーバーを再現しやすくなる。

##### Immutable Infrastructure：不変なインフラ
アル地点のサーバーの状態を保存し、複製可能にする考え方のこと。
正しくセットアップされた状態のサーバーを常に使えるというのが最大の利点。

サーバーに変更を加えたい場合は、既存のインフラをアップデートするのではなく作り直して新しいサーバーのイメージとして保存し、複製できるようにする。
一度セットアップしたサーバーは変更を加えることがなく破棄するので、冪等性を気にする必要がなくなる。

「Infrastructure as Code」と「Immutable Infrastructure」の考え方を簡単かつ低コストで実現するのがDocker。

Dockerfile によって構成を管理 → IaC がDockerの大原則
既存のコンテナを高速に破棄して新たに構築 → Immutable Infrastructure の側面

#### アプリケーションとインフラをセットで構築する
Dockerコンテナ ＝ OS（インフラ） ＋ アプリケーション

Dockerイメージのビルドは、インフラとアプリケーションをセットでビルドできること。
分断が起きないため、作業環境の際が生まれづらく成る。

### 1.2.2 アプリケーションの構成管理のしやすさ
#### Docker のコンテナオーケストレーションシステム
Docker Compose： 複数のコンテナを利用したアプリケーションの管理をしやすくするためのツール。

- yaml形式の設定ファイルで実行コンテナを定義
- 依存関係を定義して起動順を制御

Docker と Docker Compose を介すことで本来複雑だった複数のアプリケーションやミドルウェアの依存関係がコードで簡潔に管理できるようになった。

Docker Swarm： Docker Compose を単一のサーバーだけでなく、複数のサーバーを跨いで複数のコンテナを管理できるようにしたもの。

- Docker Compose での複数コンテナ群の管理
- コンテナの増減
- ノードのリソースを効率的に利用するためのコンテナを配置
- 負荷分散機能
- ローリングアップデートによるデプロイ

複数のノードを跨いで多くのコンテナ群を管理する手法をコンテナオーケストレーションという。
コンテナオーケストレーションの分野でデファクトスタンダードの地位を確立しつつあるのが Kubernetes。